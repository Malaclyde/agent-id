# Milestone v2.2: Demo Scripts

**Status:** âœ… SHIPPED 2026-02-27
**Phases:** 33-37
**Total Plans:** 16

## Overview

Create runnable Python demo scripts that demonstrate all agent and client capabilities against the backend API.

## Phases

### Phase 33: Agent Demo - Core

**Goal:** Agent demo script handles configuration, key generation, registration, and basic authentication.
**Depends on**: None
**Plans**: 5 plans

Plans:

- [x] 33-01: Crypto utilities and Ed25519 key management
- [x] 33-02: Configuration management with .env handling
- [x] 33-03: Registration flow with challenge-response
- [x] 33-04: Authentication operations (login, logout, info)
- [x] 33-05: CLI implementation and end-to-end verification

**Details:**
- Succesful end-to-end agent lifecycle established.
- User can configure .env file with backend URL and keys.
- Two-step challenge flow for registration.

### Phase 34: Agent Demo - Extended Operations

**Goal:** Agent demo script handles queries, claims, oversight, and key rotation.
**Depends on**: Phase 33
**Plans**: 3 plans

Plans:

- [x] 34-01: Query subcommand and fail-fast HTTP wrapper
- [x] 34-02: Claim challenges and overseer revocation
- [x] 34-03: Key rotation with dual-signature and .env backup

**Details:**
- Dual-signature key rotation ensures maximum security.
- shultil.copy2 used for atomic .env backups.

### Phase 35: Agent Demo - OAuth Client

**Goal:** Agent demo script handles OAuth client registration and authorization.
**Depends on**: Phase 33
**Plans**: 2 plans

Plans:

- [x] 35-01: register-client subcommand with key provision options
- [x] 35-02: authorize subcommand with PKCE code challenge support

**Details:**
- Support for generating or providing existing client keys.

### Phase 36: Client Demo - Core

**Goal:** Client demo script handles configuration, PKCE, key generation, and token exchange.
**Depends on**: None
**Plans**: 4 plans

Plans:

- [x] 36-01: Core utilities and Ed25519 key management
- [x] 36-02: Configuration management and PKCE generation
- [x] 36-03: Client assertion JWT and HTTP callback server
- [x] 36-04: Token exchange and CLI implementation

**Details:**
- Blocking HTTP server allows for seamless local development of OAuth clients.

### Phase 37: Client Demo - OAuth Operations

**Goal:** Client demo script handles token refresh, userinfo, revocation, and introspection.
**Depends on**: Phase 36
**Plans**: 2 plans

Plans:

- [x] 37-01: Helper functions (hash_access_token, create_dpop_proof), refresh and discover subcommands
- [x] 37-02: Userinfo (DPoP-bound), revoke, and introspect subcommands

**Details:**
- Full support for DPoP-bound tokens and RFC-compliant management endpoints.

---

## Milestone Summary

**Key Decisions:**

- Decision: Use `argparse` to minimize external dependencies. (Outcome: Success, zero-install for standard Python users).
- Decision: dual-signature rotation (old key DPoP + new key body sig). (Outcome: Verified working on backend).
- Decision: Mask private keys in CLI output. (Outcome: Improved security/UX).

**Issues Resolved:**

- Established robust fail-fast HTTP pattern for Python scripts.
- Correctly handled Ed25519 DPoP proofs in standard Python.

**Issues Deferred:**

- None - all v2.2 goals met.

**Technical Debt Incurred:**

- Hardcoded `/v1/` prefixes in some URLs to work around backend discovery bugs.
- Manual mapping between agent-demo client registration and client-demo config.

---

_For current project status, see .planning/ROADMAP.md_
