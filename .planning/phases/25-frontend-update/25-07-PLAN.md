---
phase: 25-frontend-update
plan: 07
type: execute
wave: 1
depends_on: ["25-06"]
files_modified:
  - frontend/src/pages/ShadowClaim.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Instructions UI uses CSS classes from index.css"
    - "All elements have border-radius: 0"
    - "Colors match project palette (--primary: #FF6B61, --text: #6B4226, etc.)"
  artifacts:
    - path: "frontend/src/pages/ShadowClaim.tsx"
      provides: "Styled agent confirmation instructions"
      fix: "Replace inline style={{}} props with CSS classes"
  key_links:
    - from: "ShadowClaim.tsx"
      to: "index.css"
      via: "className attributes"
---

<objective>
Replace inline styles with CSS classes to match project design system.

Purpose: Fix Test 3 - styles don't match the application
Output: Instructions UI matches project color palette and has squared corners
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/25-frontend-update/25-UAT.md
# Gap: Test 3 - Agent confirmation instructions

The style of the displayed instructions does not match the style of the application - 
the elements should use classes from the css file and not inline html styles tag. 
Carefully review the design and color scheme of this project and apply to all new elements 
introduced in this stage. Make sure that the divs have squared corners (border radius 0) 
and that the colors of the background are from the color palette used in the project.

Project CSS palette:
- --primary: #FF6B61
- --primary-hover: #FF9387
- --secondary: #FFD275
- --text: #6B4226
- --text-secondary: #8B6F4E
- --background: #FFF8F0
- --surface: #FFFFFF
- --border: #6B4226
- --success: #6B8E23
</context>

<tasks>

<task type="auto">
<name>Replace inline styles with CSS classes</name>
  <files>frontend/src/pages/ShadowClaim.tsx</files>
  <action>
    Replace all inline style={{...}} props in ShadowClaim.tsx with appropriate CSS classes.
    
    Key sections to fix:
    
    1. Loading state (lines 226-245): Use existing .loading class or create minimal inline style only for animation
    
    2. Error state (lines 431-477): Replace inline card styles with .card class, remove border-radius
    
    3. Expired state (lines 482-546): Replace inline styles with .card class
    
    4. Main instructions UI (lines 583-811):
       - Container: Use .page-container with flex utilities
       - Instructions dark panel: Replace background #1f2937 with a styled div using existing classes
       - Code blocks: Use .code-block class (already defined in index.css)
       - Buttons: Use .btn and .btn-primary classes
    
    5. Apply border-radius: 0 to any elements that need squared corners
    
    6. Replace color values:
       - #1f2937 (dark) → use .code-block or create dark variant
       - #f9fafb, #d1d5db, #9ca3af → use --text-secondary
       - #10b981 (green) → use --success
       - #ef4444 (red) → use --error
       - #3b82f6 (blue) → use --primary
       - #fef3c7 (yellow) → use --warning background
  </action>
  <verify>TypeScript compiles. Visual inspection shows matching colors and squared corners.</verify>
  <done>ShadowClaim component uses CSS classes matching project design</done>
</task>

<task type="auto">
  <name>Add custom CSS for dark instructions panel</name>
  <files>frontend/src/pages/ShadowClaim.tsx</files>
  <action>
    Since the project doesn't have a dark panel class, add component-specific styles at the bottom of the file:
    
    ```css
    /* Add inside the existing <style> block */
    .instructions-panel {
      background-color: var(--text);
      padding: 1.5rem;
      border: 3px solid var(--border);
      border-radius: 0;
      margin-bottom: 1.5rem;
    }
    
    .instructions-panel h2 {
      margin-bottom: 1rem;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--background);
    }
    
    .instructions-panel p {
      color: var(--text-light);
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }
    
    .instructions-code {
      background-color: #1a1a1a;
      padding: 1rem;
      border: 2px solid var(--border-light);
      border-radius: 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
      color: var(--secondary);
      word-break: break-all;
    }
    
    .instructions-code.url {
      color: var(--success);
    }
    
    .instructions-code.body {
      color: var(--primary);
    }
    
    .copy-btn {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.5rem;
      background-color: var(--surface-alt);
      border: 2px solid var(--border);
      border-radius: 0;
      color: var(--text);
      cursor: pointer;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .copy-btn:hover {
      background-color: var(--primary);
      color: white;
    }
    
    .countdown-box {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      background-color: var(--surface-alt);
      border: 2px solid var(--warning);
      border-radius: 0;
      margin-bottom: 1.5rem;
      color: var(--text);
    }
    
    .waiting-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background-color: var(--surface-alt);
      border: 2px solid var(--primary);
      border-radius: 0;
      margin-bottom: 1.5rem;
      color: var(--text);
    }
   >
  <verify ```
  </action>TypeScript compiles. Styles compile without errors.</verify>
  <done>Custom CSS classes defined for instruction panel elements</done>
</task>

<task type="auto">
  <name>Update component to use new CSS classes</name>
  <files>frontend/src/pages/ShadowClaim.tsx</files>
  <action>
    Update the JSX to use the new CSS classes:
    
    1. Replace dark instructions div: className="instructions-panel"
    2. Replace URL/code blocks: className="instructions-code url" / "instructions-code body"
    3. Replace copy buttons: className="copy-btn"
    4. Replace countdown: className="countdown-box"
    5. Replace waiting indicator: className="waiting-box"
    
    Keep inline styles ONLY where necessary for dynamic values (like animation).
  </action>
  <verify>TypeScript compiles. No inline styles remain except animations.</verify>
  <done>Component uses semantic CSS classes</done>
</task>

</tasks>

<verification>
1. Run `cd frontend && npm run build` - should complete without errors
2. Verify all elements use CSS classes (border-radius: 0)
3. Verify colors match project palette
</verification>

<success_criteria>
- All UI elements use CSS classes from index.css or custom classes
- Elements have squared corners (border-radius: 0)
- Colors match project palette
</success_criteria>

<output>
After completion, create `.planning/phases/25-frontend-update/25-07-SUMMARY.md`
</output>
