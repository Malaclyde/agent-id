---
phase: 07-update-outdated-docs
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "subscription-endpoints.md POST /upgrade response schema matches actual implementation"
  artifacts:
    - path: "docs/v1/flows/subscription/subscription-endpoints.md"
      provides: "Correct POST /upgrade response with price_id, customer_email, customer_name, customData"
      min_lines: 400
  key_links: []
---

<objective>
Fix documentation gap: subscription-endpoints.md shows incorrect POST /upgrade response schema.

Purpose: Update the response schema to match actual implementation.

Output: subscription-endpoints.md with correct response format.
</objective>

<context>
@.planning/phases/07-update-outdated-docs/07-CONTEXT.md
@.planning/phases/07-update-outdated-docs/07-01-VERIFICATION.md

**Gap from verification:**
- Issue: Lines 173, 203-209 show checkout_url in response
- Actual: Code returns price_id, customer_email, customer_name, customData
- Fix: Update response schema to match actual implementation
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix POST /upgrade response schema</name>
  <files>docs/v1/flows/subscription/subscription-endpoints.md</files>
  <action>
Fix subscription-endpoints.md lines 173 and 203-209:

Current (incorrect):
- Shows "checkout_url" in response schema
- Suggests backend returns pre-built checkout URL

Expected (correct):
- Replace "checkout_url" with "price_id"
- Add "customer_email", "customer_name", "customData" fields

Actual response from backend/src/routes/subscriptions.ts:
```json
{
  "price_id": "pri_xxx",
  "customer_email": "user@example.com",
  "customer_name": "User Name",
  "customData": { "overseer_id": "..." },
  "tier": "PRO",
  "price": 15,
  "message": "..."
}
```

Update the response schema to match this actual implementation.
  </action>
  <verify>
grep shows "price_id" in response, no "checkout_url" in POST /upgrade response section
  </verify>
  <done>
subscription-endpoints.md POST /upgrade response matches actual implementation
</done>
</task>

</tasks>

<verification>
Gap closure verification:
- [x] POST /upgrade response schema updated
- [x] Matches actual code response format
</verification>

<success_criteria>
Gap closed: subscription-endpoints.md POST /upgrade response now correct
</success_criteria>

<output>
After completion, create `.planning/phases/07-update-outdated-docs/07-02-SUMMARY.md`
</output>
