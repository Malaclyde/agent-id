---
phase: 08-api-prefix-to-v1-prefix
plan: 07
type: execute
wave: 2
depends_on:
  - 08-01
files_modified:
  - docs/v1/flows/subscription/subscription-endpoints.md
  - docs/v1/flows/subscription/subscription-flows.md
  - docs/v1/requirements/subscription/subscription-model.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All flow documentation uses /v1/* paths"
    - "No /api/*, /webhooks, or /oauth paths remain in flows/ and requirements/"
  artifacts:
    - path: "docs/v1/flows/"
      provides: "Flow documentation with /v1 paths"
      contains: "/v1/"
      not_contains: '"/api/'
    - path: "docs/v1/requirements/"
      provides: "Requirements documentation with /v1 paths"
      contains: "/v1/"
      not_contains: '"/api/'
  key_links: []
---

<objective>
Update API flow and requirements documentation to use /v1/* prefix paths.

Purpose: Documentation must match the new API structure after backend migration.
Output: Updated documentation files in docs/v1/flows/ and docs/v1/requirements/ with all /api/* paths changed to /v1/*
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@docs/v1/flows/subscription/subscription-endpoints.md
@docs/v1/flows/subscription/subscription-flows.md
@docs/v1/requirements/subscription/subscription-model.md

Files to update (all paths /api/* -> /v1/*, /webhooks -> /v1/webhooks, /oauth -> /v1/oauth):
1. docs/v1/flows/subscription/subscription-endpoints.md - Subscription endpoints documentation
2. docs/v1/flows/subscription/subscription-flows.md - Subscription flow diagrams
3. docs/v1/requirements/subscription/subscription-model.md - Subscription model references

Replace all occurrences of:
- /api/agents -> /v1/agents
- /api/overseers -> /v1/overseers
- /api/clients -> /v1/clients
- /api/subscriptions -> /v1/subscriptions
- /webhooks -> /v1/webhooks
- /oauth -> /v1/oauth
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update flow and requirements documentation paths</name>
  <files>
    - docs/v1/flows/subscription/subscription-endpoints.md
    - docs/v1/flows/subscription/subscription-flows.md
    - docs/v1/requirements/subscription/subscription-model.md
  </files>
  <action>
    Update all flow and requirements documentation files to use /v1/* prefix paths:

    For EACH file, perform replaceAll replacements:
    - "/api/agents" → "/v1/agents"
    - "/api/overseers" → "/v1/overseers"  
    - "/api/clients" → "/v1/clients"
    - "/api/subscriptions" → "/v1/subscriptions"
    - "/webhooks" → "/v1/webhooks"
    - "/oauth" → "/v1/oauth"

    This applies to:
    - Endpoint URLs in flow descriptions
    - API call examples in flow diagrams
    - Subscription model endpoint references
  </action>
  <verify>
    grep -rn '"/api/' docs/v1/flows/ 2>&1
    Expected output: No matches
    
    grep -rn '"/api/' docs/v1/requirements/ 2>&1
    Expected output: No matches
    
    grep -rn '/webhooks' docs/v1/flows/ docs/v1/requirements/ 2>&1
    Expected output: No matches (only /v1/webhooks should exist)
    
    grep -rn '"\/oauth"' docs/v1/flows/ docs/v1/requirements/ 2>&1
    Expected output: No matches (only /v1/oauth should exist)
  </verify>
  <done>
    All flow and requirements documentation uses /v1/ prefix with no old /api/*, /webhooks, or /oauth paths remaining
  </done>
</task>

</tasks>

<verification>
After completion, run:
```bash
# Verify no /api/ paths remain in flows/
grep -rn '"/api/' docs/v1/flows/
# Expected: No matches

# Verify no /api/ paths remain in requirements/
grep -rn '"/api/' docs/v1/requirements/
# Expected: No matches

# Verify no /webhooks paths remain
grep -rn '/webhooks' docs/v1/flows/ docs/v1/requirements/
# Expected: No matches

# Verify no /oauth paths remain
grep -rn '"\/oauth"' docs/v1/flows/ docs/v1/requirements/
# Expected: No matches

# Verify /v1/ paths are used
grep -rn '/v1/' docs/v1/flows/ docs/v1/requirements/ | head -10
# Expected: Multiple matches showing updated paths
```
</verification>

<success_criteria>
All 3 flow and requirements documentation files updated to use /v1/* paths with no old /api/*, /webhooks, or /oauth paths remaining
</success_criteria>

<output>
After completion, create `.planning/phases/08-api-prefix-to-v1-prefix/08-07-SUMMARY.md`
</output>
