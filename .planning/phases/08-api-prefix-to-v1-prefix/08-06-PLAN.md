---
phase: 08-api-prefix-to-v1-prefix
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/vite.config.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Vite proxy configuration only contains /v1 proxy"
    - "Unused /oauth proxy removed from configuration"
  artifacts:
    - path: "frontend/vite.config.ts"
      contains: "'/v1'"
      not_contains: "'/oauth'"
  key_links:
    - from: "frontend/src/api/client.ts"
      to: "backend/src/index.ts"
      via: "Vite proxy on /v1"
      pattern: "proxy.*'/v1'"
---

<objective>
Remove unused /oauth proxy from Vite configuration

Purpose: Clean up Vite proxy configuration by removing the unused /oauth proxy since the frontend API client now uses /v1/clients/* for OAuth operations
Output: Vite configuration with only /v1 proxy
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/08-api-prefix-to-v1-prefix/08-CONTEXT.md
@.planning/phases/08-api-prefix-to-v1-prefix/08-02-SUMMARY.md
@.planning/phases/08-api-prefix-to-v1-prefix/08-VERIFICATION.md

Gap source: 08-VERIFICATION.md - "/oauth proxy is still configured but unused; should be removed"

Plan 08-02 updated the Vite proxy to route /v1 requests to the backend. The /oauth proxy was also added but is now unused since the frontend API client uses /v1/clients/* endpoints for OAuth (not /oauth directly).
</context>

<tasks>

<task type="auto">
  <name>Remove unused /oauth proxy from Vite configuration</name>
  <files>frontend/vite.config.ts</files>
  <action>
  Remove the unused /oauth proxy configuration from frontend/vite.config.ts:
  
  Remove lines 19-22:
  ```typescript
    '/oauth': {
      target: 'http://localhost:8787',
      changeOrigin: true,
    },
  ```
  
  Keep only the /v1 proxy configuration:
  ```typescript
  proxy: {
    '/v1': {
      target: 'http://localhost:8787',
      changeOrigin: true,
    },
  },
  ```
  
  The /oauth proxy is no longer needed because:
  - Frontend API client (frontend/src/api/client.ts) uses /v1/clients/* endpoints for OAuth operations
  - The frontend doesn't call /oauth directly
  - All OAuth requests go through the /v1 proxy
  
  Reference: Plan 08-02 updated vite.config.ts to proxy /v1 to backend; Plan 08-01 moved OAuth routes to /v1/oauth
  Gap reason: "/oauth proxy is still configured but unused; should be removed since frontend doesn't call /oauth directly"
  </action>
  <verify>grep -n "'/oauth'" frontend/vite.config.ts should return nothing; grep -n "'/v1'" frontend/vite.config.ts should show the proxy configuration</verify>
  <done>Vite proxy configuration only contains /v1 proxy, unused /oauth proxy removed</done>
</task>

</tasks>

<verification>
After completion, run:
```bash
# Verify /oauth proxy is removed
grep "'/oauth'" frontend/vite.config.ts
# Should return nothing

# Verify /v1 proxy still exists
grep -A2 "'/v1'" frontend/vite.config.ts
# Should show the proxy configuration

# Verify config is valid TypeScript
cd frontend && npm run type-check || npx tsc --noEmit
```
</verification>

<success_criteria>
Vite proxy configuration contains only the /v1 proxy, unused /oauth proxy removed
</success_criteria>

<output>
After completion, create `.planning/phases/08-api-prefix-to-v1-prefix/08-06-SUMMARY.md`
</output>
