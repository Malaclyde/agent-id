---
phase: 08-api-prefix-to-v1-prefix
plan: 03
type: execute
wave: 2
depends_on:
  - 08-01
files_modified:
  - docs/v1/endpoints/README.md
  - docs/v1/endpoints/agents.md
  - docs/v1/endpoints/overseers.md
  - docs/v1/endpoints/clients.md
  - docs/v1/endpoints/subscriptions.md
  - docs/v1/endpoints/webhooks.md
  - docs/v1/endpoints/oauth.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All endpoint documentation uses /v1/* paths"
    - "No /api/*, /webhooks, or /oauth paths remain in endpoints/"
  artifacts:
    - path: "docs/v1/endpoints/"
      provides: "API documentation with /v1 paths"
      contains: "/v1/"
      not_contains: '"/api/'
  key_links:
    - from: "docs/v1/endpoints/agents.md"
      to: "backend/src/routes/agents.ts"
      via: "documentation references /v1/agents"
---

<objective>
Update API endpoint documentation to use /v1/* prefix paths.

Purpose: Documentation must match the new API structure after backend migration.
Output: Updated documentation files in docs/v1/endpoints/ with all /api/* paths changed to /v1/*
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@docs/v1/endpoints/README.md
@docs/v1/endpoints/agents.md
@docs/v1/endpoints/overseers.md
@docs/v1/endpoints/clients.md
@docs/v1/endpoints/subscriptions.md
@docs/v1/endpoints/webhooks.md
@docs/v1/endpoints/oauth.md

Files to update (all paths /api/* -> /v1/*, /webhooks -> /v1/webhooks, /oauth -> /v1/oauth):
1. docs/v1/endpoints/README.md - Main endpoint index, rate limiting table, auth summary
2. docs/v1/endpoints/agents.md - All 17 agent endpoints
3. docs/v1/endpoints/overseers.md - All 14 overseer endpoints
4. docs/v1/endpoints/clients.md - All 4 client endpoints
5. docs/v1/endpoints/subscriptions.md - All 4 subscription endpoints
6. docs/v1/endpoints/webhooks.md - Webhook endpoint
7. docs/v1/endpoints/oauth.md - All 6 OAuth endpoints

Replace all occurrences of:
- /api/agents -> /v1/agents
- /api/overseers -> /v1/overseers
- /api/clients -> /v1/clients
- /api/subscriptions -> /v1/subscriptions
- /webhooks -> /v1/webhooks
- /oauth -> /v1/oauth
</context>

<tasks>

<task type="auto">
  <name>Task 4: Update endpoint documentation paths</name>
  <files>
    - docs/v1/endpoints/README.md
    - docs/v1/endpoints/agents.md
    - docs/v1/endpoints/overseers.md
    - docs/v1/endpoints/clients.md
    - docs/v1/endpoints/subscriptions.md
    - docs/v1/endpoints/webhooks.md
    - docs/v1/endpoints/oauth.md
  </files>
  <action>
    Update all endpoint documentation files to use /v1/* prefix paths:

    For EACH file, perform replaceAll replacements:
    - "/api/agents" → "/v1/agents"
    - "/api/overseers" → "/v1/overseers"  
    - "/api/clients" → "/v1/clients"
    - "/api/subscriptions" → "/v1/subscriptions"
    - "/webhooks" → "/v1/webhooks"
    - "/oauth" → "/v1/oauth"

    This applies to:
    - Endpoint URLs (e.g., "POST /api/agents/login" → "POST /v1/agents/login")
    - Any code examples or curl commands
    - Sequence diagrams and flow descriptions
    - Rate limiting table entries
    - Authentication summary sections
  </action>
  <verify>
    grep -rn '"/api/' docs/v1/endpoints/ 2>&1
    Expected output: No matches (only possibly in comments explaining the change)
    
    grep -rn '/webhooks' docs/v1/endpoints/ 2>&1
    Expected output: No matches (only /v1/webhooks should exist)
    
    grep -rn '"\/oauth"' docs/v1/endpoints/ 2>&1
    Expected output: No matches (only /v1/oauth should exist)
  </verify>
  <done>
    All endpoint documentation uses /v1/ prefix with no old /api/*, /webhooks, or /oauth paths remaining
  </done>
</task>

</tasks>

<verification>
After completion, run:
```bash
# Verify no /api/ paths remain
grep -rn '"/api/' docs/v1/endpoints/
# Expected: No matches

# Verify no /webhooks paths remain (only /v1/webhooks)
grep -rn '/webhooks' docs/v1/endpoints/
# Expected: No matches

# Verify no /oauth paths remain (only /v1/oauth)
grep -rn '"\/oauth"' docs/v1/endpoints/
# Expected: No matches

# Verify /v1/ paths are used
grep -rn '/v1/' docs/v1/endpoints/ | head -10
# Expected: Multiple matches showing updated paths
```
</verification>

<success_criteria>
All 7 endpoint documentation files updated to use /v1/* paths with no old /api/*, /webhooks, or /oauth paths remaining
</success_criteria>

<output>
After completion, create `.planning/phases/08-api-prefix-to-v1-prefix/08-03-SUMMARY.md`
</output>
